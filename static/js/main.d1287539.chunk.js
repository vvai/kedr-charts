(this["webpackJsonpkedr-charts"]=this["webpackJsonpkedr-charts"]||[]).push([[0],{230:function(t,e,n){},252:function(t,e,n){},321:function(t,e,n){},323:function(t,e,n){},324:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),s=n(52),i=n.n(s),c=(n(230),n(76)),o=n(332),u=n(328),l=n(149),d=n.n(l),f=n(196),j=n(105),h=n(197),b=n.n(h).a.create({baseURL:"https://api.allorigins.win/raw?url=https://europe-west3-kedrbots-5fee0.cloudfunctions.net/"}),p=Object(j.b)("charts/fetchData",function(){var t=Object(f.a)(d.a.mark((function t(e){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r=e,b.get("rusSeptExportAnswers",r);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()),v=Object(j.c)({name:"charts",initialState:{code:"",status:"idle",filters:{type:"students",min:1,max:100,sort_by:"tasks"},rawData:[]},reducers:{setCode:function(t,e){t.code=e.payload},setData:function(t,e){t.rawData=e.payload},setFilters:function(t,e){t.filters=e.payload}},extraReducers:function(t){t.addCase(p.pending,(function(t){t.status="loading"})).addCase(p.fulfilled,(function(t,e){t.status="idle",t.rawData=e.payload}))}}),m=v.actions,O=(m.setCode,m.setFilters),g=(m.setData,function(t){return t.charts.filters}),x=function(t){return t.charts.rawData},y=v.reducer,w=n(70),I=n(331),_=n(329),k=n(330),C=(n(252),n(17)),N=I.a.Option,D=function(t){var e=t.filters,n=Object(c.b)();return Object(C.jsxs)("div",{className:"graph-settings",children:[Object(C.jsx)(_.a.Item,{children:Object(C.jsxs)(I.a,{value:e.type,style:{width:320},onChange:function(t){return n(O(Object(w.a)(Object(w.a)({},e),{},{type:t})))},children:[Object(C.jsx)(N,{value:"students",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438: % \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432"}),Object(C.jsx)(N,{value:"tasks",children:"\u0417\u0430\u0434\u0430\u043d\u0438\u044f: % \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432"})]})}),Object(C.jsxs)(_.a.Item,{label:"\u0414\u0438\u0430\u043f\u0430\u0437\u043e\u043d \u0437\u0430\u0434\u0430\u043d\u0438\u0439",children:[Object(C.jsx)(k.a,{style:{width:70,marginRight:20},onChange:function(t){return n(O(Object(w.a)(Object(w.a)({},e),{},{min:t.target.value})))},type:"number",value:e.min}),Object(C.jsx)(k.a,{style:{width:70},type:"number",value:e.max,onChange:function(t){return n(O(Object(w.a)(Object(w.a)({},e),{},{max:t.target.value})))}})]}),"tasks"===e.type&&Object(C.jsx)(_.a.Item,{children:Object(C.jsxs)(I.a,{value:e.sort_by,style:{width:220},onChange:function(t){return n(O(Object(w.a)(Object(w.a)({},e),{},{sort_by:t})))},children:[Object(C.jsx)(N,{value:"tasks",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u0437\u0430\u0434\u0430\u043d\u0438\u044f\u043c"}),Object(C.jsx)(N,{value:"complexity",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438"})]})})]})},F=(n(321),function(t){var e=t.data,n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00B65E",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FB4242";function r(t){return t.toString(16)}function a(t){return parseInt(t,16)}t="undefined"!==typeof t?t:50;for(var s="#",i=0;i<=5;i+=2){for(var c=a(e.substr(i,2)),o=a(n.substr(i,2)),u=r(Math.floor(o+t/100*(c-o)));u.length<2;)u="0"+u;s+=u}return s}(e.persent);return Object(C.jsxs)("div",{className:"graph-row",children:[Object(C.jsx)("div",{className:"graph-row__name",children:e.name}),Object(C.jsx)("div",{className:"graph-row__stats",style:{color:n},children:e.description}),Object(C.jsx)("div",{className:"graph-row__bar-container",children:Object(C.jsx)("div",{className:"graph-row__bar",style:{backgroundColor:n,width:"".concat(e.persent,"%")}})})]})});var M=function(t){var e=function(t,e){var n=t.flatMap((function(t){return t.answers})).filter((function(t){var n=Number.parseInt(t.questionId);return n<=e.max&&n>=e.min})).map((function(t){return t.questionId})),r=new Set(n).size,a=t.map((function(t){var n={name:"".concat(t.first_name," ").concat(t.last_name||""),code:t.code},a=t.answers.filter((function(t){var n=Number.parseInt(t.questionId);return n<=e.max&&n>=e.min}));return n.total=r,n.right=a.filter((function(t){var e;return null===(e=t.answer)||void 0===e?void 0:e.isRight})).length,n.persent=n.right?Math.floor(100*n.right/n.total):0,n.description="".concat(n.right,"/").concat(n.total),n}));return a.sort((function(t,e){return e.persent-t.persent})),a}(t.data,t.filters);return Object(C.jsx)("div",{style:{display:"table",padding:"0 24px"},children:e.map((function(t){return Object(C.jsx)(F,{data:t},t.code||t.name)}))})};var S=function(t){var e=function(t,e){var n={};t.flatMap((function(t){return t.answers})).filter((function(t){var n=Number.parseInt(t.questionId);return n<=e.max&&n>=e.min})).forEach((function(t){var e=n[t.questionId];e?(e.total+=1,e.right+=t.answer.isRight?1:0):n[t.questionId]={total:1,right:t.answer.isRight?1:0}}));var r=Object.keys(n).map((function(t){var e=n[t];return{name:t,total:e.total,right:e.right,description:"".concat(e.right?Math.floor(100*e.right/e.total):0,"%"),persent:e.right?Math.floor(100*e.right/e.total):0}}));return"complexity"===e.sort_by?r.sort((function(t,e){return Number.parseInt(t.persent)-Number.parseInt(e.persent)})):r.sort((function(t,e){return t.name-e.name})),r}(t.data,t.filters);return Object(C.jsx)("div",{style:{display:"table",padding:"0 24px"},children:e.map((function(t){return Object(C.jsx)(F,{data:t},t.name)}))})},q=function(t){var e=t.data,n=t.filters;return"students"===(null===n||void 0===n?void 0:n.type)?Object(C.jsx)(M,{data:e,filters:n}):"tasks"===(null===n||void 0===n?void 0:n.type)?Object(C.jsx)(S,{data:e,filters:n}):Object(C.jsx)("div",{children:"Sorry, no info"})},R=(n(209),n(323),o.a.Content);var E=function(){var t=Object(c.b)(),e=Object(c.c)(g),n=Object(c.c)(x);return Object(r.useEffect)((function(){t(p())}),[t]),Object(C.jsx)("div",{className:"App",children:Object(C.jsxs)(R,{children:[Object(C.jsx)(D,{filters:e}),Object(C.jsx)(u.a,{}),Object(C.jsx)(q,{filters:e,data:n})]})})},B=Object(j.a)({reducer:{charts:y}}),L=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,333)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),s(t),i(t)}))};i.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(c.a,{store:B,children:Object(C.jsx)(E,{})})}),document.getElementById("root")),L()}},[[324,1,2]]]);
//# sourceMappingURL=main.d1287539.chunk.js.map